!function(){"use strict";function a(a,b,c){return{restrict:"EA",replace:!0,scope:{videoId:"=?",playlist:"=?",ratio:"=?",loop:"=?",mute:"=?",start:"=?",end:"=?",contentZIndex:"=?",allowClickEvents:"=?",mobileImage:"=?",playerVars:"=?",playerCallback:"&?"},transclude:!0,template:"<div><div></div><div ng-transclude></div></div>",link:function(d,e){function f(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}}function g(){var a=window.navigator.userAgent,b=a.indexOf("MSIE "),c=a.indexOf("Trident/"),d=a.indexOf("Edge/");if(b>0)return parseInt(a.substring(b+5,a.indexOf(".",b)),10);if(c>0){var e=a.indexOf("rv:");return parseInt(a.substring(e+3,a.indexOf(".",e)),10)}return d>0?parseInt(a.substring(d+5,a.indexOf(".",d)),10):!1}function h(a,b){var c=["top","right","bottom","left"],d=function(c,d){return c[d]=parseInt(b.call(w,a+"-"+d),10),c};return c.reduce(d,{})}function i(a,b){function c(){var a,c=Array.prototype.slice.call(arguments),d=0,e=function(b,c){return a[c]?b+a[c]:b};for(var f in b)b.hasOwnProperty(f)&&(a=b[f],d+=c.reduce(e,0));return d}return{width:a.width+c("left","right"),height:g()&&g()<12?a.height:a.height+c("top","bottom")}}function j(){var a=e.children().eq(1),b=!!a.children().length,c=Array.prototype.slice.call(e.parent().children());if(e.parent().css({position:"relative",overflow:"hidden"}),!b){e.css({position:"absolute",left:"0",top:"0"});var f=c.indexOf(e[0]);f>-1&&c.splice(f,1),a=angular.element(c)}a.css({position:"relative",zIndex:d.contentZIndex||99})}function k(){w=a.getComputedStyle(e.parent()[0]);var b=["width","height"],c=["border","margin"];return g()&&g()<12&&c.push("padding"),b=b.reduce(function(a,b){return a[b]=parseInt(w.getPropertyValue(b),10),a},{}),c=c.reduce(function(a,b){return a[b]=h(b,w.getPropertyValue),a},{}),i(b,c)}function l(){var a=parseInt(z.width/d.ratio,10),b=parseInt(z.height*d.ratio,10),c=z.height<a;return{width:c?z.width:b,height:c?a:z.height}}function m(){j(),z=k(),A=l()}function n(){var a={zIndex:1,position:"absolute",width:A.width+"px",height:A.height+"px",left:parseInt((z.width-A.width)/2,10)+"px",top:parseInt((z.height-A.height)/2,10)+"px"};d.allowClickEvents||(a.pointerEvents="none"),E.css(a)}function o(a){a=a||d,y.seekTo(a.start||0)}function p(a){var b,c;a=a||d,b=a.end?a.end-(a.start||0):d.start?y.getDuration()-a.start:y.getDuration(),c=1e3*b,C=setTimeout(function(){d.playlist?y.nextVideo():o(a)},c)}function q(){var a=d.playlist[y.getPlaylistIndex()];p(a)}function r(){F&&c(function(){F({player:y,methods:{resize:v}})}),d.playlist&&(y.loadPlaylist(B),d.loop&&y.setLoop(!0)),d.mute&&!y.isMuted()?y.mute():y.isMuted()&&y.unMute(),o(),d.$on("$destroy",function(){C&&clearTimeout(C),angular.element(a).off("resize",H),y.destroy()})}function s(a){if(a.data===YT.PlayerState.PLAYING&&(E.css("display","block"),!d.playlist&&d.loop&&p(),d.playlist&&d.loop&&q()),a.data===YT.PlayerState.UNSTARTED&&d.playlist){var b=d.playlist[y.getPlaylistIndex()],c=void 0===b.mute?d.mute:b.mute;G=b.mobileImage||d.mobileImage||"//img.youtube.com/vi/"+b.videoId+"/maxresdefault.jpg",u(G),E.css("display","none"),o(b),c||c&&d.mute?y.isMuted()||y.mute():c&&d.mute||y.isMuted()&&y.unMute()}}function t(){m();var a={autoplay:1,controls:0,iv_load_policy:3,cc_load_policy:0,modestbranding:1,playsinline:1,rel:0,showinfo:0,playlist:d.videoId};angular.isObject(d.playerVars)&&(a=angular.extend({},a,d.playerVars)),y=new YT.Player(x,{width:A.width,height:A.height,videoId:d.videoId,playerVars:a,events:{onReady:r,onStateChange:s}}),E=e.children().eq(0),E.css("display","none"),n()}function u(a){e.parent().css({backgroundImage:"url("+a+")",backgroundSize:"cover",backgroundPosition:"center center"})}function v(){angular.element(a).trigger("resize")}var w,x,y,z,A,B,C,D=document.querySelector('script[src="//www.youtube.com/iframe_api"]'),E=e.children().eq(0),F=d.playerCallback,G=d.mobileImage||"//img.youtube.com/vi/"+d.videoId+"/maxresdefault.jpg";if(x="player"+Array.prototype.slice.call(document.querySelectorAll("div[video-id]")).indexOf(e[0]),E.attr("id",x),d.ratio=d.ratio||16/9,d.loop=void 0===d.loop?!0:d.loop,d.mute=void 0===d.mute?!0:d.mute,!d.videoId&&!d.playlist)throw new Error("Either video-id or playlist must be defined.");if(d.videoId&&d.playlist)throw new Error("Both video-id and playlist cannot be defined, please choose one or the other.");d.playlist&&(B=d.playlist.map(function(a){return a.videoId}));var H=f(function(){m(),n()},300);if(u(G),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){if(!a.youTubeIframeAPIReady){var I=b.defer();a.youTubeIframeAPIReady=I.promise,a.onYouTubeIframeAPIReady=function(){I.resolve()}}if(!D){var J=document.createElement("script");J.src="//www.youtube.com/iframe_api";var K=document.getElementsByTagName("script")[0];K.parentNode.insertBefore(J,K)}a.youTubeIframeAPIReady.then(t),angular.element(a).on("resize",H)}d.$watch("videoId",function(a,b){a&&b&&a!==b&&(clearTimeout(C),G=d.mobileImage||"//img.youtube.com/vi/"+a+"/maxresdefault.jpg",u(G),E.css("display","none"),y.loadVideoById(a))}),d.$watchCollection("playlist",function(a,b){a&&b&&a!==b&&(clearTimeout(C),B=a.map(function(a){return a.videoId}),y.loadPlaylist(B),d.loop&&y.setLoop(!0))})}}}angular.module("angularVideoBg",[]),angular.module("angularVideoBg").directive("videoBg",a),a.$inject=["$window","$q","$timeout"]}();